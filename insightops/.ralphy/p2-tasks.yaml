tasks:
  - title: "BOT-26: Standardize all webhook processing through background job queue"
    completed: true
    parallel_group: 1
    description: "Domains, themes, and app/scopes_update currently process inline.
      Refactor to: authenticate → queue → return 200. Update jobProcessor to
      handle these topics. Add tests."
  - title: "BOT-28: Paginate lineItems in sales velocity queries"
    completed: true
    parallel_group: 1
    description: "In salesVelocity.server.ts, lineItems(first: 50) is not paginated.
      Add cursor-based pagination for line items. Add warning log when MAX_PAGES
      cap is hit. Add tests."
  - title: "BOT-13: Build context enrichment engine for alerts"
    completed: true
    parallel_group: 2
    description: "Create contextEnricher.server.ts. Enrich ChangeEvents with
      business context: price changes get % change and direction, inventory zero
      gets revenue at risk, visibility changes get recent sales. Store in
      ChangeEvent.contextData JSON. Update digest emails to render context. Add
      tests."
  - title: "BOT-14: Build Money Saved calculation engine"
    completed: true
    parallel_group: 2
    description: "Create moneySaved.server.ts. For each change event estimate
      revenue impact if unnoticed. Price drop: delta × velocity × 3 days. Out of
      stock: velocity × price × 3 days. Apply 50% conservative factor. Add
      moneySaved field to ChangeEvent via Prisma migration. Add tests."
  - title: "BOT-15: Build Money Saved dashboard Pro only"
    completed: false
    parallel_group: 3
    description: Create app/routes/app.dashboard.tsx. Show total saved this month,
      top 5 catches by impact, monthly trend. Use Shopify Polaris. Free users
      see teaser with upgrade CTA. Add loader with aggregation. Add tests.
  - title: "BOT-16: Implement instant email alerts for critical changes Pro only"
    completed: false
    parallel_group: 3
    description: "Trigger immediate email when: price drops >50%, product out of
      stock all locations, visibility hidden, domain removed, permissions
      expanded. Add shouldSendInstantAlert() with rate limiting max 10 per hour
      per shop. Add tests."
  - title: "BOT-17: Redesign email templates for mobile"
    completed: false
    parallel_group: 4
    description: Responsive HTML emails for Gmail, Apple Mail, Outlook. Single
      column, inline CSS only, 320px minimum width, 14px body font, StoreGuard
      branding with shield icon. Refactor emailService.server.ts. Add tests.
  - title: "BOT-18: Build smart onboarding flow"
    completed: false
    parallel_group: 4
    description: "Create onboarding at app/routes/app._index.tsx. Steps: welcome,
      set alert email, choose monitors, sync progress, confirmation. Use
      Polaris. Add onboardedAt to Shop via Prisma migration. Skip for returning
      users. Add tests."
  - title: "BOT-19: Audit and complete webhook and scope registration"
    completed: false
    parallel_group: 5
    description: Audit shopify.app.toml for all required scopes and webhooks. Verify
      each webhook has a route handler. Add missing handlers as stubs that queue
      to background jobs. Add test verifying completeness.
